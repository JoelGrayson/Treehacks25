<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hawkin</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/split.js/dist/split.min.js"></script>
    <style>
        .eeg-tile {
            background-color: #f3f4f6;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
        }
        #characters>div>div:first-child {
            font-size: 50px;
        }
        #characters>div>div:last-child {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class='flex w-full h-full' id='split-container'>
        <div id='left-pane' class='split'>
            <div id='characters' class='flex gap-2'>
                <div>
                    <div>H</div>
                    <div>0001</div>
                </div>
                <div>
                    <div>E</div>
                    <div>0101</div>
                </div>
                <div>
                    <div>L</div>
                    <div>0111</div>
                </div>
                <div>
                    <div>L</div>
                    <div>0111</div>
                </div>
                <div>
                    <div>O</div>
                    <div>1000</div>
                </div>
            </div>
        </div>
        <div id='gap' class='bg-black w-[3px] h-screen'></div>
        <div id='right-pane' class='split'>
            Charts
            <canvas id='chart'></canvas>
        </div>
    </div>





    <script>
        // Initialize Split.js
        Split(['#left-pane', '#right-pane'], {
            sizes: [50, 50],
            minSize: 200,
            gutterSize: 10,
            cursor: 'col-resize'
        });


        // Generate random data for a single line
        function generateData() {
            return Array.from({length: 10}, () => Math.floor(Math.random() * 401) - 200);
        }

        // Generate a random color
        function getRandomColor() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            return `rgb(${r}, ${g}, ${b})`;
        }

        // Create labels for the x-axis (time points)
        const labels = Array.from({length: 10}, (_, i) => `T${i + 1}`);

        // Generate datasets for 16 lines
        const datasets = Array.from({length: 16}, (_, i) => ({
            label: `Dataset ${i + 1}`,
            data: generateData(),
            borderColor: getRandomColor(),
            tension: 0.1,
            fill: false
        }));

        // Get the canvas element
        const ctx = document.getElementById('chart').getContext('2d');

        // Create the chart
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: datasets
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: false,
                        suggestedMin: -200,
                        suggestedMax: 200
                    }
                },
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            }
        });

        // create a websocket to /websocket
        const data=[];
        
        // const cEl=document.getElementById('characters');
        // function renderData() {
        //     cEl.innerHTML=`
        //         ${}
        //     `;
        // }
        
        // const ws=new WebSocket('ws://127.0.0.1:5000/websocket');
        // ws.onopen=()=>console.log('Connected to server');
        // ws.onmessage=(event)=>{
        //     const got=JSON.parse(event.data);
        //     console.log(got);
        //     const { type, data }=got;
        //     if (type==='audio') {
        //         // TODO: play audio at URL data (passed in from Hume)
        //     }
        //     if (type==='char') {
        //         // TODO: add character to the display
        //     }
        //     if (type==='byte') {
        //         // TODO: add a byte
        //     }
        //     if (type==='eeg') {
        //         chart
        //     }
        // };
    </script>
</body>
</html>